using System;using System.Collections.Generic;using System.Diagnostics;using System.Linq;using System.Text;using System.Transactions;using Negocio.Utilidades;using PersistenciaSigeor;namespace Negocio.Reportes{    public class FabricanteNegocio    {        public static string ObtenerFabricantesPorEstado(string parametro)        {            List<SM_BRAND> result;            try            {                if (string.IsNullOrEmpty(parametro))                    return null;                var param = Serializador.DeSerializeEntity<ClaseBasica>(parametro);                var transactionOptions = new TransactionOptions                {                    IsolationLevel = System.Transactions.IsolationLevel.ReadUncommitted                };                using (var transactionScope = new TransactionScope(TransactionScopeOption.Required, transactionOptions))                {                    using (var context = new SigeorEntities())                    {                        result = (from fabricante in context.SM_BRAND                                  where fabricante.ESTADO.Equals(param.EstadoString)                                  select fabricante).ToList();                    }                    transactionScope.Complete();                }            }            catch (Exception ex)            {                Log.WriteEntry("No se pudo obtener los fabricantes por estado: " + ex, EventLogEntryType.Error);                throw new Exception("No se pudo obtener los fabricantes por estado: " + ex.Message);            }            return result.Any() ? Serializador.SerializeEntity(result) : null;        }    }}
